module.exports=function(e){var o="string"==typeof e.elem?document.getElementById(e.elem):e.elem,s="js-Dropdown-title",l="is-selected",t="is-open",n=o.getElementsByTagName("optgroup"),a=o.options,i=a.length,d=0,r=document.createElement("div");r.className="js-Dropdown",o.id&&(r.id="custom-"+o.id);var c=document.createElement("button");c.className=s,c.textContent=a[0].textContent;var m=document.createElement("ul");if(m.className="js-Dropdown-list",n.length)for(var u=0;u<n.length;u++){var p=document.createElement("div");p.innerText=n[u].label,p.classList.add("js-Dropdown-optgroup"),m.appendChild(p),v(n[u].getElementsByTagName("option"))}else v(a);function v(e){for(var t=0;t<e.length;t++){var n=document.createElement("li");n.innerText=e[t].textContent,n.setAttribute("data-value",e[t].value),n.setAttribute("data-index",d++),a[o.selectedIndex].textContent===e[t].textContent&&(n.classList.add(l),c.textContent=e[t].textContent),m.appendChild(n)}}function g(){m.classList.toggle(t)}function f(){m.classList.remove(t)}return r.appendChild(c),r.appendChild(m),r.addEventListener("click",function(e){e.preventDefault();var t=e.target;t.className===s&&g();if("LI"===t.tagName){r.querySelector("."+s).innerText=t.innerText,o.options.selectedIndex=t.getAttribute("data-index");var n=new CustomEvent("change");o.dispatchEvent(n);for(var a=0;a<i;a++)m.querySelectorAll("li")[a].classList.remove(l);t.classList.add(l),f()}}),o.parentNode.insertBefore(r,o),o.style.display="none",document.addEventListener("click",function(e){r.contains(e.target)||f()}),{toggle:g,close:f,open:function(){m.classList.add(t)}}};